  [1m[36m (0.4ms)[0m  [1mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "s3_relay_uploads" DISABLE TRIGGER ALL[0m
  [1m[35m (1.4ms)[0m  select table_name from information_schema.views where table_schema = 's3_relay_test'
  [1m[36m (3.5ms)[0m  [1mTRUNCATE TABLE "s3_relay_uploads" RESTART IDENTITY CASCADE;[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "s3_relay_uploads" ENABLE TRIGGER ALL
--------------------------------------------------------------------
S3Relay::Upload::validations::filename: test_0001_validates presence
--------------------------------------------------------------------
  [1m[36mS3Relay::Upload Exists (1.1ms)[0m  [1mSELECT  1 AS one FROM "s3_relay_uploads"  WHERE "s3_relay_uploads"."uuid" IS NULL LIMIT 1[0m
------------------------------------------------------------------------
S3Relay::Upload::validations::content_type: test_0001_validates presence
------------------------------------------------------------------------
  [1m[35mS3Relay::Upload Exists (0.6ms)[0m  SELECT  1 AS one FROM "s3_relay_uploads"  WHERE "s3_relay_uploads"."uuid" IS NULL LIMIT 1
-----------------------------------------------------
S3Relay::Upload::scopes::pending: test_0001_anonymous
-----------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "s3_relay_uploads" ("created_at", "pending_at", "state", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2014-10-19 07:30:01.448189"], ["pending_at", "2014-10-19 07:30:01.447037"], ["state", "pending"], ["updated_at", "2014-10-19 07:30:01.448189"]]
  [1m[36m (1.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "s3_relay_uploads" ("created_at", "pending_at", "state", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2014-10-19 07:30:01.455225"], ["pending_at", "2014-10-19 07:30:01.454358"], ["state", "imported"], ["updated_at", "2014-10-19 07:30:01.455225"]]
  [1m[35m (1.4ms)[0m  COMMIT
  [1m[36mS3Relay::Upload Load (0.7ms)[0m  [1mSELECT "s3_relay_uploads".* FROM "s3_relay_uploads"  WHERE "s3_relay_uploads"."state" = 'pending'[0m
----------------------------------------------------------------
S3Relay::Upload::validations::uuid: test_0001_validates presence
----------------------------------------------------------------
  [1m[35mS3Relay::Upload Exists (0.6ms)[0m  SELECT  1 AS one FROM "s3_relay_uploads"  WHERE "s3_relay_uploads"."uuid" IS NULL LIMIT 1
------------------------------------------------------------------
S3Relay::Upload::validations::uuid: test_0002_validates uniqueness
------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "s3_relay_uploads" ("created_at", "pending_at", "state", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2014-10-19 07:30:01.479873"], ["pending_at", "2014-10-19 07:30:01.479495"], ["state", "pending"], ["updated_at", "2014-10-19 07:30:01.479873"]]
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
  [1m[35mS3Relay::Upload Exists (0.4ms)[0m  SELECT  1 AS one FROM "s3_relay_uploads"  WHERE "s3_relay_uploads"."uuid" IS NULL LIMIT 1
-----------------------------------------------
S3Relay::Upload::#imported: test_0001_anonymous
-----------------------------------------------
----------------------------------------------------------
S3Relay::Upload::associations::parent: test_0001_anonymous
----------------------------------------------------------
----------------------------------------------------------------------
S3Relay::Upload::validations::pending_at: test_0001_validates presence
----------------------------------------------------------------------
  [1m[36mS3Relay::Upload Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "s3_relay_uploads"  WHERE "s3_relay_uploads"."uuid" IS NULL LIMIT 1[0m
-----------------------------------------------
S3Relay::Upload::#pending?: test_0001_anonymous
-----------------------------------------------
------------------------------------------------------
S3Relay::Upload::scopes::imported: test_0001_anonymous
------------------------------------------------------
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "s3_relay_uploads" ("created_at", "pending_at", "state", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2014-10-19 07:30:01.495724"], ["pending_at", "2014-10-19 07:30:01.495313"], ["state", "pending"], ["updated_at", "2014-10-19 07:30:01.495724"]]
  [1m[35m (0.5ms)[0m  COMMIT
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "s3_relay_uploads" ("created_at", "pending_at", "state", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["created_at", "2014-10-19 07:30:01.497792"], ["pending_at", "2014-10-19 07:30:01.497469"], ["state", "imported"], ["updated_at", "2014-10-19 07:30:01.497792"]]
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
  [1m[35mS3Relay::Upload Load (0.3ms)[0m  SELECT "s3_relay_uploads".* FROM "s3_relay_uploads"  WHERE "s3_relay_uploads"."state" = 'imported'
-----------------------------------------------------
S3Relay::Upload::#mark_imported!: test_0001_anonymous
-----------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mS3Relay::Upload Exists (0.2ms)[0m  SELECT  1 AS one FROM "s3_relay_uploads"  WHERE "s3_relay_uploads"."uuid" IS NULL LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
-------------------------------------------------------
S3Relay::Upload::upon finalization: test_0001_anonymous
-------------------------------------------------------
--------------------------------------------------
S3Relay::Upload::#private_url: test_0001_anonymous
--------------------------------------------------
